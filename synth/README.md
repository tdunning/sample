# Generating Synthetic Power Data 

This directory contains code for generating synthetic power data including both the actual data as well as an inventory of the devices generating the data. The only trick to this is that there is a lot of internal coherency that is required to make this data look reasonable. First, the data as generated should always refer to machines in the inventory, second the inventory should have realistic machine information and location information.

The general process here starts with a catalog of machine types. I grabbed about 20 machine definitions from the (HPE Partsurfer)[https://partsurfer.hpe.com/] to get this going (it's easy to add more later) and put the results into `server_types.csv`. At this point, `log-synth` can use the `server_inventory.s` schema to generate serial numbers and locations for a bunch of machines. Joining the output of `log-synth` with `server_types.csv` resolves the references to the server types into a fully fledged inventory which goes into `../data/inventory.csv`.

Generating actual samples in `collect.sql` uses a few tricks to get the measurements we want. The core idea is that the measurements are a cartesian join with the inventory, the sample times (`times.csv`) and the measurement types (`measurements.csv`). This results in one sample for each combination of machine in inventory, time and measurement type. These samples are augmented with a random number in the range [0,1] scaled by the reasonable max in `measurements.csv`. This all works well for generating a single day of data. We could generate more by extending the times table or, more economically, by joining against a date table.